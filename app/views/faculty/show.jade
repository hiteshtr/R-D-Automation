extends ../layouts/default

block main
  center
      h2|List of Faculties
block content
  .col-sm-3
    form(method="get",action="/faculty")
      button.btn.btn-default(type='submit') Add New Faculty
  .col-sm-9
   br
   br
  .row
    .col-sm-11
      .table-responsive
        table(class='table table-striped table-bordered table-condensed')
          thead
            tr
              th #
              th Faculty Name
              th Department
              th Designation
              th
              th
          tbody   
            - each faculty,i in faculties
              tr
                td
                  form( method="post", action="/faculty/#{faculty._id}") 
                   input(type='hidden', name="_method", value="delete") 
                   input(type='hidden', name='_csrf', value="#{csrf_token}")
                   input(name="_id", type="hidden", value=faculty._id.toHexString()) 
                   button.btn.btn-default.glyphicon.glyphicon-trash(type='submit',onclick="return confirm('Are you sure to delete?')")
                      
                td
                  input(type='text',class='form-control',name="faculty_name",value=faculty.faculty_name, disabled='true',id='faculty_name#{i}')= faculty.faculty_name
                td
                  select.form-control(type='text', disabled='true',id='department_name#{i}')
                   - each department in departments
                     if department._id.toString() == faculty.faculty_dept_id.toString()
                      option(value=department._id, selected)= department.department_name
                     else
                      option(value=department._id)= department.department_name

                td  
                 select.form-control(type='text', disabled='true',id='post_name#{i}')
                   - each post in posts
                     if faculty.faculty_desig_id.toString() == post._id.toString()
                      option(value=post._id, selected)= post.post_name
                     else
                      option(value=post._id)= post.post_name
                td
                   input(name="_id", type="hidden", value=faculty._id)
                   button.btn.btn-default(onclick="enablefaculty('update#{i}','faculty_name#{i}','post_name#{i}','department_name#{i}')") Edit
                td
                  form( method="post", action="/faculty/#{faculty._id}") 
                   input(type='hidden', name="_method", value="put") 
                   input(type='hidden', name='_csrf', value="#{csrf_token}")
                   input(name="_id", type="hidden", value=faculty._id) 
                   button.btn.btn-default(type='submit', disabled='true',id='update#{i}',onclick="return confirm('Are you sure to Update?')") Update
    .col-sm-1            