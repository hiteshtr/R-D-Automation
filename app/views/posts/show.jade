extends ../layouts/default

block main
  center
      h2|List of Posts

block content
  a.btn.btn-default(href="/posts") Add New Post
  br
  br
  .table-responsive
    table(class='table table-condensed')
      thead
        tr
          th #
          th Designation
          th Minimum Qualification
          th Minimum Experience
          th Designation Type
          th Designation Staff
          th
          th
      tbody
        each post,i in posts
          tr
            td
              form( method="post", action="/posts/#{post._id}") 
                input(type='hidden', name="_method", value="delete") 
                input(type='hidden', name='_csrf', value="#{csrf_token}")
                input(name="_id", type="hidden", value=post._id.toHexString()) 
                button.btn.btn-default.glyphicon.glyphicon-trash(type='submit',onclick="return confirm('Are you sure to delete?')")
            form( method="post", action="/posts/#{post._id}")
              input(type='hidden', name="_method", value="PUT") 
              input(type='hidden', name='_csrf', value="#{csrf_token}")
              input(name="_id", type="hidden", value=post._id.toHexString())
              td
                input.form-control(type='text', name="designation",value=post.designation, disabled='false',id='designation#{i}')
              td
                input.form-control(type='text', name="min_qualification",value=post.min_qualification, disabled='false',id='minimum_qualification#{i}')
              td
                .input-group
                  span.input-group-addon Year
                  input.form-control(type="number", name='min_experience[year]', id='year#{i}', disabled='true', value=post.min_experience.year)

                  span.input-group-addon Month
                  input.form-control(type="number", name='min_experience[month]', id='month#{i}', disabled='true', value=post.min_experience.month)
              td
                select.form-control(name="designation_type", id="designation_type#{i}", disabled='true')
                  option(value=1, selected=parseInt(post.designation_type) == 1? true:false) Contractual Position
                  option(value=2, selected=parseInt(post.designation_type) == 2? true:false) Permanent Position
              td
                select.form-control(name="staff_type", id="staff_type#{i}", disabled='true')
                  option(value=1, selected=parseInt(post.staff_type) == 1? true:false) Scientific Staff
                  option(value=2, selected=parseInt(post.staff_type) == 2? true:false) Technical Staff
                  option(value=3, selected=parseInt(post.staff_type) == 3? true:false) Admiistrative Staff
                  option(value=4, selected=parseInt(post.staff_type) == 4? true:false) Academic Staff
              td
                a.btn.btn-default(onclick="enablepost('update#{i}','designation#{i}','minimum_qualification#{i}','designation_type#{i}','staff_type#{i}','year#{i}','month#{i}')") Edit
              td 
                button.btn.btn-default(type='submit', disabled='true',id='update#{i}',onclick="return confirm('Are you sure to Update?')") Update